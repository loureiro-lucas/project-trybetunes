(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{29:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){},41:function(t,e,n){},43:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){},48:function(t,e,n){},49:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),r=n(22),c=n.n(r),s=(n(29),n(12)),o=n(2),u=n(3),l=n(5),d=n(4),j=n(11),b=n(6),h=n(14),p=n(0),m=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsx)("p",{id:"loading",children:"Carregando..."})}}]),n}(i.a.Component),f="user",O=function(t){return localStorage.setItem(f,JSON.stringify(t))},v=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},g=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(f));null===e&&(e={}),v(e)(t)}))},x=(n(31),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).buttonValidation=function(){a.state.username.length<3?a.setState({isButtonDisable:!0}):a.setState({isButtonDisable:!1})},a.changesHandler=function(t){var e=t.target,n=e.id,i=e.value;a.setState(Object(h.a)({},n,i),(function(){return a.buttonValidation()}))},a.buttonClickHandler=function(){a.setState({loading:!0},(function(){var t,e=a.state.username;(t={name:e},new Promise((function(e){O(Object(s.a)(Object(s.a)({},{name:"",email:"",image:"",description:""}),t)),v("OK")(e)}))).then((function(){a.props.history.push("/search")}))}))},a.state={username:"",isButtonDisable:!0,loading:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.isButtonDisable,n=t.username;return t.loading?Object(p.jsx)(m,{}):Object(p.jsxs)("div",{"data-testid":"page-login",id:"login-page-container",children:[Object(p.jsx)("img",{id:"login-icon",src:"https://img.icons8.com/cotton/64/000000/earbud-headphones.png",alt:"earbuds"}),Object(p.jsxs)("div",{id:"login-page-inside-container",children:[Object(p.jsx)("label",{htmlFor:"username",id:"username-input-label",children:Object(p.jsx)("input",{type:"text",id:"username","data-testid":"login-name-input",onChange:this.changesHandler,value:n,placeholder:"username"})}),Object(p.jsx)("button",{type:"submit",id:"login-button","data-testid":"login-submit-button",disabled:e,onClick:this.buttonClickHandler,children:"ENTRAR"})]})]})}}]),n}(i.a.Component)),k=(n(32),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).returnUser=function(){return a.setState({loading:!0},(function(){g().then((function(t){a.setState({username:t.name,loading:!1})}))}))},a.componentDidMount=function(){a.returnUser()},a.state={username:"",loading:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.loading,n=t.username;return Object(p.jsxs)("header",{"data-testid":"header-component",id:"header",children:[Object(p.jsxs)("div",{id:"name-and-logo-container",children:[Object(p.jsx)("img",{id:"login-icon",src:"https://img.icons8.com/cotton/64/000000/earbud-headphones.png",alt:"earbuds"}),Object(p.jsx)("div",{id:"user-name-container",children:e?Object(p.jsx)(m,{}):Object(p.jsx)("p",{"data-testid":"header-user-name",id:"user-name",children:n})})]}),Object(p.jsx)("nav",{id:"navigation-container",children:Object(p.jsxs)("ul",{id:"navigation",children:[Object(p.jsx)("li",{children:Object(p.jsx)(j.b,{to:"/search","data-testid":"link-to-search",children:"PESQUISA"})}),Object(p.jsx)("li",{children:Object(p.jsx)(j.b,{to:"/favorites","data-testid":"link-to-favorites",children:"FAVORITAS"})}),Object(p.jsx)("li",{children:Object(p.jsx)(j.b,{to:"/profile","data-testid":"link-to-profile",children:"PERFIL"})})]})})]})}}]),n}(i.a.Component)),S=(n(41),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).returnSubtitle=function(){var e=t.props.artist;return"Resultado de \xe1lbuns de: ".concat(e)},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.albuns;return Object(p.jsxs)("div",{id:"albuns-list",children:[Object(p.jsx)("span",{id:"albuns-list-subtitle",children:this.returnSubtitle()}),Object(p.jsx)("div",{id:"albuns-container",children:t.map((function(t){return Object(p.jsx)("div",{className:"album-container",children:Object(p.jsx)(j.b,{to:"/album/".concat(t.collectionId),"data-testid":"link-to-album-".concat(t.collectionId),className:"album-link",children:Object(p.jsxs)("div",{id:"album-card",children:[Object(p.jsx)("img",{id:"album-cover",src:t.artworkUrl100,alt:"album cover"}),Object(p.jsxs)("div",{id:"album-info",children:[Object(p.jsx)("p",{id:"album-name",children:t.collectionName}),Object(p.jsx)("p",{id:"artist-name",children:t.artistName}),Object(p.jsxs)("p",{id:"track-count",children:[t.trackCount,"faixas"]})]})]})})},t.collectionId)}))})]})}}]),n}(i.a.Component)),y=n(15),I=n.n(y),N=n(17),D=function(){var t=Object(N.a)(I.a.mark((function t(e){var n,a,i,r,c,s;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return i=t.sent,t.next=7,i.json();case 7:return r=t.sent,c=r.results,s=c.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=(n(43),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).changesHandler=function(t){var e=t.target;a.setState({searchInput:e.value},(function(){a.validateButton()}))},a.validateButton=function(){a.state.searchInput.length>=2?a.setState({isButtonDisabled:!1}):a.setState({isButtonDisabled:!0})},a.searchIt=function(t){t.preventDefault(),a.setState({loading:!0},(function(){var t=a.state.searchInput;D(t).then((function(t){a.setState((function(e){return{lastArtist:e.searchInput,searchInput:"",loading:!1,albuns:t}}),a.checkAlbuns(t))}))}))},a.checkAlbuns=function(t){0===t.length?a.setState({noAlbum:!0}):a.setState({noAlbum:!1})},a.state={searchInput:"",isButtonDisabled:!0,loading:!1,albuns:[],noAlbum:!1,lastArtist:""},a}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.isButtonDisabled,n=t.searchInput,a=t.loading,i=t.albuns,r=t.noAlbum,c=t.lastArtist;return Object(p.jsxs)("div",{"data-testid":"page-search",children:[Object(p.jsx)(k,{}),Object(p.jsxs)("form",{id:"search-container",children:[Object(p.jsx)("label",{id:"search-input-container",htmlFor:"search-input",children:Object(p.jsx)("input",{type:"text","data-testid":"search-artist-input",id:"search-input",placeholder:"nome do artista",value:n,onChange:this.changesHandler})}),Object(p.jsx)("button",{type:"submit","data-testid":"search-artist-button",id:"search-button",disabled:e,onClick:this.searchIt,children:"PESQUISAR"})]}),a&&Object(p.jsx)(m,{}),0!==i.length&&Object(p.jsx)(S,{albuns:i,artist:c}),r&&Object(p.jsx)("span",{id:"no-album",children:"Nenhum \xe1lbum foi encontrado"})]})}}]),n}(i.a.Component)),F=n(24),A="favorite_songs";JSON.parse(localStorage.getItem(A))||localStorage.setItem(A,JSON.stringify([]));var w=function(){return JSON.parse(localStorage.getItem(A))},B=function(t){return localStorage.setItem(A,JSON.stringify(t))},H=function(t){return function(e){setTimeout((function(){e(t)}),500)}},U=function(){return new Promise((function(t){var e=w();H(e)(t)}))},E=function(t){return new Promise((function(e){if(t){var n=w();B([].concat(Object(F.a)(n),[t]))}H("OK")(e)}))},R=function(t){return new Promise((function(e){var n=w();B(n.filter((function(e){return e.trackId!==t.trackId}))),H("OK")(e)}))},P=(n(44),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).addOrRemoveSong=function(t,e,n){t(e).then((function(){a.setState((function(t){return{loading:!1,isFavorite:!t.isFavorite}})),n&&n()}))},a.favoriteHandler=function(){var t=a.props,e=t.music,n=t.fetchFavorites;a.setState({loading:!0},(function(){a.state.isFavorite?a.addOrRemoveSong(R,e,n):a.addOrRemoveSong(E,e,n)}))},a.state={loading:!1,isFavorite:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.music;U().then((function(n){n.some((function(t){return t.trackId===e.trackId}))&&t.setState((function(t){return{loading:!1,isFavorite:!t.isFavorite}}))}))}},{key:"render",value:function(){var t=this.state,e=t.loading,n=t.isFavorite,a=this.props.music,i=a.trackName,r=a.previewUrl,c=a.trackId;return e?Object(p.jsx)(m,{}):Object(p.jsxs)("div",{id:"music-card",children:[Object(p.jsx)("span",{id:"music-name",children:i}),Object(p.jsxs)("audio",{id:"player","data-testid":"audio-component",src:r,controls:!0,children:[Object(p.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(p.jsx)("code",{children:"audio"})]}),Object(p.jsxs)("label",{htmlFor:"checkbox-music-".concat(c),className:"favorite-input-container",children:[Object(p.jsx)("span",{className:"favorite-input-label",children:"Favorita"}),Object(p.jsx)("input",{type:"checkbox",checked:n,className:"favorite",id:"checkbox-music-".concat(c),"data-testid":"checkbox-music-".concat(c),onChange:this.favoriteHandler})]})]})}}]),n}(i.a.Component)),M=function(){var t=Object(N.a)(I.a.mark((function t(e){var n,a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=(n(45),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).fetchMusics=function(){var t=a.props.match.params.id;return M(t)},a.state={musics:[],loading:!0},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.fetchMusics().then((function(e){t.setState({musics:e,loading:!1})}))}},{key:"render",value:function(){var t=this,e=this.state,n=e.musics;return e.loading?Object(p.jsx)(m,{}):Object(p.jsxs)("div",{id:"page-album","data-testid":"page-album",children:[Object(p.jsx)(k,{}),Object(p.jsxs)("div",{id:"album-header",children:[Object(p.jsx)("img",{id:"album-image",src:n[0].artworkUrl100,alt:""}),Object(p.jsxs)("div",{id:"album-artist-and-name",children:[Object(p.jsx)("h4",{"data-testid":"artist-name",children:n[0].artistName}),Object(p.jsx)("h3",{"data-testid":"album-name",children:n[0].collectionName})]})]}),Object(p.jsx)("div",{id:"music-list",children:n.slice(1).map((function(e){return Object(p.jsx)(P,{clasName:"music",music:e,isFavorite:t.favoriteHandler},e.trackId)}))})]})}}]),n}(i.a.Component)),T=(n(46),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).fetchFavorites=function(){a.setState({loading:!0},(function(){U().then((function(t){a.setState({loading:!1,favoriteSongs:t})}))}))},a.state={loading:!1,favoriteSongs:[]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchFavorites()}},{key:"render",value:function(){var t=this,e=this.state,n=e.loading,a=e.favoriteSongs;return n?Object(p.jsx)(m,{}):Object(p.jsxs)("div",{id:"page-favorites","data-testid":"page-favorites",children:[Object(p.jsx)(k,{}),Object(p.jsx)("p",{id:"favorites-title",children:"Favoritas"}),Object(p.jsx)("div",{id:"favorite-list",children:a.map((function(e){return Object(p.jsx)(P,{clasName:"music",music:e,fetchFavorites:t.fetchFavorites},e.trackId)}))})]})}}]),n}(i.a.Component)),K=(n(47),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).fetchUserData=function(){a.setState({loading:!0},(function(){g().then((function(t){return a.setState({userData:t,loading:!1})}))}))},a.state={userData:{},loading:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchUserData()}},{key:"render",value:function(){var t=this.state,e=t.userData,n=t.loading;return Object(p.jsxs)("div",{id:"profile","data-testid":"page-profile",children:[Object(p.jsx)(k,{}),Object(p.jsxs)("div",{id:"user-profile",children:[Object(p.jsx)("img",{src:e.image,alt:"usu\xe1rio","data-testid":"profile-image",id:"profile-image"}),Object(p.jsx)("p",{id:"profile-name",children:e.name}),Object(p.jsx)("p",{id:"profile-email",children:e.email}),Object(p.jsx)("p",{id:"profile-description",children:e.description}),Object(p.jsx)(j.b,{id:"edit-profile-link",to:"/profile/edit",children:Object(p.jsx)("div",{id:"edit-profile-container",children:Object(p.jsx)("p",{children:"Editar perfil"})})})]}),n&&Object(p.jsx)(m,{})]})}}]),n}(i.a.Component)),V=(n(48),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).fetchUserData=function(){a.setState({loading:!0},(function(){g().then((function(t){a.setState({userName:t.name,userEmail:t.email,userDescription:t.description,userImage:t.image,loading:!1},a.validateButton)}))}))},a.validateButton=function(){var t=a.state,e=t.userName,n=t.userEmail,i=t.userDescription,r=t.userImage;e.length>0&&n.length>0&&i.length>0&&r.length>0&&a.setState({isButtonDisabled:!1})},a.changesHandler=function(t){var e=t.target;a.setState(Object(h.a)({},e.name,e.value),a.validateButton)},a.buttonClickHandler=function(){var t,e=a.state,n=e.userName,i=e.userEmail,r=e.userDescription,c=e.userImage;t={name:n,email:i,image:c,description:r},new Promise((function(e){O(Object(s.a)({},t)),v("OK")(e)})),a.props.history.push("/profile")},a.state={isButtonDisabled:!0,userName:"",userEmail:"",userDescription:"",userImage:"",loading:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchUserData()}},{key:"render",value:function(){var t=this.state,e=t.userName,n=t.userEmail,a=t.userDescription,i=t.userImage,r=t.isButtonDisabled,c=t.loading;return Object(p.jsxs)("div",{id:"page-profile-edit","data-testid":"page-profile-edit",children:[Object(p.jsx)(k,{}),Object(p.jsxs)("form",{id:"profile-edit-form",children:[Object(p.jsxs)("label",{htmlFor:"edit-input-name",children:[Object(p.jsx)("span",{className:"profile-edit-span",children:"Nome: "}),Object(p.jsx)("input",{type:"text",name:"userName",id:"edit-input-name",className:"profile-edit-input","data-testid":"edit-input-name",value:e,onChange:this.changesHandler})]}),Object(p.jsxs)("label",{htmlFor:"edit-input-email",children:[Object(p.jsx)("span",{className:"profile-edit-span",children:"Email: "}),Object(p.jsx)("input",{type:"text",name:"userEmail",id:"edit-input-email",className:"profile-edit-input","data-testid":"edit-input-email",value:n,onChange:this.changesHandler})]}),Object(p.jsxs)("label",{htmlFor:"edit-input-description",children:[Object(p.jsx)("span",{className:"profile-edit-span",children:"Descri\xe7\xe3o: "}),Object(p.jsx)("input",{type:"text",name:"userDescription",id:"edit-input-description",className:"profile-edit-input","data-testid":"edit-input-description",value:a,onChange:this.changesHandler})]}),Object(p.jsxs)("label",{htmlFor:"edit-input-image",children:[Object(p.jsx)("span",{className:"profile-edit-span",children:"URL imagem de perfil: "}),Object(p.jsx)("input",{type:"text",name:"userImage",id:"edit-input-image",className:"profile-edit-input","data-testid":"edit-input-image",value:i,onChange:this.changesHandler})]}),Object(p.jsx)("button",{type:"button","data-testid":"edit-button-save",id:"edit-button-save",onClick:this.buttonClickHandler,disabled:r,children:"SALVAR"})]}),c&&Object(p.jsx)(m,{})]})}}]),n}(i.a.Component)),L=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{"data-testid":"page-not-found",children:"NotFound"})}}]),n}(i.a.Component),Q=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsx)(j.a,{children:Object(p.jsxs)(b.c,{children:[Object(p.jsx)(b.a,{exact:!0,path:"/album/:id",component:J}),Object(p.jsx)(b.a,{exact:!0,path:"/profile/edit",render:function(t){return Object(p.jsx)(V,Object(s.a)({},t))}}),Object(p.jsx)(b.a,{exact:!0,path:"/profile",component:K}),Object(p.jsx)(b.a,{exact:!0,path:"/search",component:C}),Object(p.jsx)(b.a,{exact:!0,path:"/favorites",component:T}),Object(p.jsx)(b.a,{exact:!0,path:"/",render:function(t){return Object(p.jsx)(x,Object(s.a)({},t))}}),Object(p.jsx)(b.a,{path:"*",component:L})]})})}}]),n}(i.a.Component);c.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(Q,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.b83062f0.chunk.js.map